"use strict";(self.webpackChunklib=self.webpackChunklib||[]).push([[6677],{8798:(e,t,n)=>{n.d(t,{u:()=>a});n(2521);var o=n(4724),r=n(8710);const s=window.fetch;function a({method:e,url:t,data:n,params:a,cache:i,contextID:l}){const c=new URL(t,t.includes("//")?void 0:o.Z.apiServerUrl);new URLSearchParams(a).forEach(((e,t)=>c.searchParams.set(t,e))),i||c.searchParams.append("t",(new Date).getTime().toString());const u={method:e,headers:{"Content-Type":"application/json"},mode:"cors",body:n?JSON.stringify(n):null},g=l||r.Z.getContextID();return g&&(u.headers["X-Personalizer-Context-ID"]=g),s(c.toString(),u).then((e=>{const{status:t}=e;if(!e.ok)throw 401===t&&r.Z.invalidate(),e;return 204===t?e.text():e.json()}))}},7557:(e,t,n)=>{n.d(t,{ZP:()=>P});var o=n(4724),r=n(8710),s=n(8670),a=n(8798),i=n(4808),l=n(1064),c=n(2521);const u="Semaphore";function g(){return"lsSema-"+name}var d=n(6526),p=n(2960);const m="lsChannel";const S={call:function(e,t,n,o){s.ZP.initialize(m,`${p.G.publicPath}/storefront/channel/core.${p.G.hash}.html?key=${p.G.params.key}`,(()=>{s.ZP.call(m,e,t,n,o)}))}};var f=n(4755);const h="Auth",C=new function(e,t){t=t||5e3,this.acquire=()=>{const n=l.ZP.getCookie(g());return+n?Date.now()-parseInt(n,10)<t?(c.Z.logDebug(u,`Unavailable: ${e}`),!1):(c.Z.logDebug(u,`Expired and Acquired: ${e}`),this.release(),!0):(c.Z.logDebug(u,`Acquired: ${e}`),l.ZP.setCookie(g(),Date.now()),!0)},this.release=()=>{l.ZP.setCookie(g(),""),c.Z.logDebug(u,`Released: ${e}`)}}("auth");function x(e,t){let n=null,s=null,l=null,u=null,g=null;void 0!==LimeSpot.UserInfo&&(n=LimeSpot.UserInfo.Identifier,s=LimeSpot.UserInfo.Email,l=LimeSpot.UserInfo.CellPhone,u=LimeSpot.UserInfo.FirstName,g=LimeSpot.UserInfo.LastName);const p=Z(n,s,l,u,g),m=i.ZP.getLocalStorageObject("lsContext");if(m)!function(e,t,n,s){if(t.BypassExperienceCache)return c.Z.logDebug(h,"Cached Context processing bypassed due to BypassExperienceCache param."),void n(!1);if("1"===o.Z.getUrlParam("lsForceExperienceReload"))return c.Z.logDebug(h,"Cached Context processing bypassed due to lsForceExperienceReload URL param."),void n(!1);if(r.Z.isExpired())return c.Z.logDebug(h,"Cached Context processing bypassed due expired context."),void n(!1);if(JSON.stringify(L())!==JSON.stringify(t))return c.Z.logDebug(h,"Cached Context processing bypassed due to auth params inconsistency."),c.Z.logDebug(h,"Current auth params:",L()),c.Z.logDebug(h,"Cached auth params:",JSON.stringify(t)),void n(!1);const l=i.ZP.getLocalStorageObject("lsAuthResult");if(!l||!e)return c.Z.logDebug(h,"Cached Context processing bypassed due to auth params inconsistency."),void n(!1);c.Z.logDebug(h,`Cached Context valid on Local Storage. Bypassing authentication and performing context renewal for ${e.ContextID}`),e.Experiences=l.Experiences,LimeSpot.Context=e,b(t.UserIdentifier,t.UserEmailAddress,t.UserCellPhone,t.UserFirstName,t.UserLastName,l,n),r.Z.setAuthEventDetails({NewSession:!1}),(0,a.u)({method:"PUT",url:"/v1/userAuthentication",cache:!1,contextID:e.ContextID}).then((e=>{c.Z.logDebug(h,"Cached Context renewed.",t),s&&s(),D(e.ContextExpirationTimeStamp),d.Z.update({userSegmentGuids:e.UserSegmentGuids})})).catch((e=>{r.Z.invalidate(),c.Z.logDebug(h,"Context renewal failed.",e),n(!1),s&&s()}))}(m,p,(t=>{if(t)return c.Z.logDebug(h,"Using cached context.",p),void e(!0);c.Z.logDebug(h,"Enforcing normal authentication."),r.Z.invalidate(),x(e)}),t);else{if(c.Z.logDebug(h,"Starting Authentication...",p),!p.ExperienceGuid&&m&&f.ZP.getModule("Recommendations",m).Guid){const e=f.ZP.getModule("Recommendations",m).Guid;c.Z.logDebug(h,"Enforcing previously assigned ExperienceGuid:",e),p.ExperienceGuid=e}(0,a.u)({method:"POST",url:"/v1/userAuthentication?storefront=true",data:p,cache:!1}).then((o=>{if(void 0===o)return e&&e(!1),void(t&&t());var a;a=o,LimeSpot.Context={...a},D(a.ContextExpirationTimeStamp),o&&o.UserSegmentGuids&&d.Z.update({userSegmentGuids:o.UserSegmentGuids}),b(n,s,l,u,g,o,e),t&&t(),r.Z.setAuthEventDetails({NewSession:!0})})).catch((e=>{e&&e instanceof Response&&(c.Z.logDebug(h,"Authentication failed.",e.text()),403===e.status&&(c.Z.logDebug(h,"Disabling LimeSpot on the machine for the session."),i.ZP.setSessionStorageValue("lsDisabled","1")),t&&t())}))}}function b(e,t,n,o,r,a,u){const g=(a.Experiences||[]).map((e=>`${e.Module}: ${e.Guid}`)).join(",");c.Z.logDebug(h,`Applying context details: UserID[${a.UserID}], ContextID[${a.ContextID}],\n        CampaignGuid[${a.CampaignGuid}], CampaignEntryGuid[${a.CampaignEntryGuid}],\n        Experiences[${g}]`),l.ZP.setCookie("lsContextID",a.ContextID),i.ZP.setLocalStorageValue("lsUserID",a.UserID),i.ZP.setSessionStorageValue("lsCampaignGuid",a.CampaignGuid,!0),i.ZP.setSessionStorageValue("lsCampaignEntryGuid",a.CampaignEntryGuid,!0);v(Z(e,t,n,o,r)),i.ZP.setLocalStorageObject("lsAuthResult",a);const d=JSON.parse(JSON.stringify(LimeSpot.Context));(d.Experiences||[]).forEach((e=>delete e.Settings)),i.ZP.setLocalStorageObject("lsContext",d),LimeSpot.Context.Experiences=a.Experiences,f.ZP.getModule("Recommendations")||f.ZP.setModule("Recommendations",{BoxOptions:null,CustomCss:null,CustomJavaScript:null}),s.ZP.syncContext(),u&&u(!0)}function D(e){c.Z.logDebug(h,"Context Expiration set to: "+new Date(e)),i.ZP.setLocalStorageValue("lsContextExpires",e)}function Z(e,t,n,r,s){const a=o.Z.getLandingDetails();let c=null,u=null;a&&(c=+a.UserID||null,u=a.ContextID||null,u&&l.ZP.setCookie("lsContextID",u));const g=+i.ZP.getLocalStorageValue("lsUserID")||null;let d=null,m=null;return g&&c&&+g!=+c?(d=g,m=c):d=g||c||null,{SubscriberKey:p.G.params.key,ContextID:l.ZP.getCookie("lsContextID"),UserID:d,AlternateUserID:m,ExperienceGuid:o.Z.getUrlParam("lsExperienceGuid"),ExperiencePreview:!!o.Z.getUrlParam("lsExperiencePreview")||null,LandingDetails:a,UserIdentifier:e||null,UserEmailAddress:t||null,UserCellPhone:n||null,UserFirstName:r||null,UserLastName:s||null,BypassExperienceCache:"true"===i.ZP.getLocalStorageValue("lsBypassCache")}}function L(){return i.ZP.getLocalStorageObject("lsAuthParams")}function v(e){i.ZP.setLocalStorageObject("lsAuthParams",e)}const P={authenticate:function(e){if("1"===i.ZP.getSessionStorageValue("lsDisabled"))return c.Z.logDebug(h,"Authentication bypassed due to lsDisabled cookie."),void e(!1);const t=setInterval((()=>{C.acquire()?(x(e,(()=>{C.release()})),window.clearInterval(t)):c.Z.logDebug(h,"Authentication delayed due to semaphore lock.")}),100)},syncChannelUserID:function(){S.call("SyncUserID",{UserID:LimeSpot.Context.UserID,EncUserID:LimeSpot.Context.EncUserID,SubscriberKey:p.G.params.key,PageInfo:LimeSpot.PageInfo},(e=>{e?function(e,t){if(LimeSpot.Context.UserID===e)return void c.Z.logDebug(h,`Replacing context UserID bypassed because the same user was provided: ${e}`);c.Z.logDebug(h,`Replacing context UserID ${LimeSpot.Context.UserID} with existing ${e}`),LimeSpot.Context.UserID=e,LimeSpot.Context.EncUserID=t,s.ZP.syncContext(),i.ZP.setLocalStorageValue("lsUserID",e);const n=L();n.UserID=e,v(n);const o=i.ZP.getLocalStorageObject("lsAuthResult");o.UserID=e,o.EncUserID=t,i.ZP.setLocalStorageObject("lsAuthResult",o);const r=i.ZP.getLocalStorageObject("lsContext");r.UserID=e,r.EncUserID=t,i.ZP.setLocalStorageObject("lsContext",r)}(e.UserID,e.EncUserID):c.Z.logDebug(h,"UserID valid with Channel.")}))}}},8670:(e,t,n)=>{n.d(t,{ZP:()=>l});var o=n(4724),r=n(2521);const s={},a="Channel";function i(e){r.Z.logDebug(a,"syncContext("+e+");",LimeSpot.Context),document.querySelectorAll(void 0===e?"iframe[data-owner='LimeSpot']":"#"+e).forEach((e=>{e.contentWindow.postMessage(JSON.stringify({Owner:"LimeSpot",Target:"*",Command:"SyncContext",Context:LimeSpot.Context,ApiServerUrl:o.Z.apiServerUrl}),"*")}))}window.addEventListener("message",(e=>{if(null==e||null==e.data||void 0===e.data||"function"!=typeof e.data.indexOf)return;if(e.data.indexOf("LimeSpot")<0)return;const t=JSON.parse(e.data);if("*"!==t.Target)"Storefront"===t.Target&&s[t.CallbackID]&&(r.Z.logDebug(a,`Callback [${t.CallbackID}].`,t.Result),s[t.CallbackID](t.Result),s[t.CallbackID]=null);else if("SyncContext"===t.Command)LimeSpot.Context=t.Context,i()}),!1);const l={syncContext:i,initialize:function(e,t,n,o){r.Z.logDebug(a,`[${e}] initializing...`),t+=(-1===t.indexOf("?")?"?":"&")+"channelID="+e;const s=document.querySelector("iframe[src='"+t+"']");if(s){const t=setInterval((()=>{r.Z.logDebug(a,`[${e}] frame exists, waiting to initialize.`),"1"===s.dataset.initialized&&(clearInterval(t),r.Z.logDebug(a,`[${e}] already initialized.`),n&&n())}),10)}else void 0===o?((o=document.createElement("iframe")).id=e,o.style.display="none",document.body.insertBefore(o,document.body.children[0])):""!==o.id&&void 0!==o.id||(o.id=e),o.addEventListener("load",(t=>{i(e),r.Z.logDebug(a,`[${e}] initialized.`),"1"!==t.target.dataset.initialized?(t.target.dataset.initialized="1",n&&n()):n&&n()})),o.setAttribute("src",t),o.dataset.owner="LimeSpot"},call:function(e,t,n,i,l){if(!e)return void console.error("Target channel unspecified.");const c=document.getElementById(e);if(!c)return void console.error("Channel not initialized.");const u={Owner:"LimeSpot",Method:t,Params:n,Target:e,Source:"Storefront"};i&&(u.SuccessCallbackID=Math.random().toString(36).substr(2,10),s[u.SuccessCallbackID]=i),l&&(u.ErrorCallbackID=Math.random().toString(36).substr(2,10),s[u.ErrorCallbackID]=l);const g=o.Z.scriptHostUrl||"*";r.Z.logDebug(a,`[${e}] calling.`,u),c.contentWindow.postMessage(JSON.stringify(u),g)}}},8710:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(4808),r=n(8670),s=n(2521);const a="Context";let i;const l={getContextID:function(){return LimeSpot&&LimeSpot.Context&&LimeSpot.Context.ContextID||null},invalidate:function(){o.ZP.setLocalStorageObject("lsAuthResult",null),o.ZP.setLocalStorageObject("lsContext",null),LimeSpot.Context=null,r.ZP.syncContext(),s.Z.logDebug(a,"Context cache invalidated")},isExpired:function(){const e=parseFloat(o.ZP.getLocalStorageValue("lsContextExpires")),t=e<=(new Date).getTime();return s.Z.logDebug(a,`Cached Context expiry: ${new Date(e)} - Expired: ${t}`),t},setAuthEventDetails:function(e){i=e},getAuthEventDetails:function(){return i}}},2442:(e,t,n)=>{n.d(t,{U:()=>s});var o=n(4724),r=n(7557);function s(e){o.Z.processUrlParams(),r.ZP.authenticate((t=>{e(t)}))}},4862:(e,t,n)=>{var o=n(2442);LimeSpot.DisableAutoInitialize||(0,o.U)((async()=>{(await Promise.all([n.e(6704),n.e(8396),n.e(7593)]).then(n.bind(n,7593))).default.init(),Promise.all([n.e(6704),n.e(8396),n.e(3552)]).then(n.bind(n,3552)).then((e=>e.default.init())),Promise.all([n.e(6704),n.e(8396),n.e(6092)]).then(n.bind(n,231)).then((e=>e.default.init()))})),window.LimeSpot={...window.LimeSpot,Storefront:{...window.LimeSpot.Storefront,Initialize:o.U}}},4724:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(7926),r=n(4808),s=n(2960);const a=s.G.publicPath,i=`${a}/storefront`,l=s.G.apiBase,c={},u={title:s.G.platform},g=[],d=[];function p(e,t,n){if(c[e])return c[e];void 0===n&&(n=location.search);const o=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(n);if(o){const n=decodeURIComponent(o[1]);return null!=n&&!0===t&&m(e,n),n}}function m(e,t){void 0===t&&(t=p(e));let n=e+"="+encodeURIComponent(t);window.location.href.includes("?"+n+"&")?n+="&":n=window.location.href.includes("?"+n)?"?"+n:"&"+n,window.history.replaceState({},window.document.title,window.location.href.replace(n,""))}function S(){let e=document.referrer.replace(/https?:\/\//g,"");!e.startsWith(location.hostname)&&e||(e=void 0);const t={};return Array.from(new URLSearchParams(location.search)).forEach((e=>{d.includes(e[0])||(t[e[0]]=g.includes(e[0].toLowerCase())?"*":e[1])})),{PageUrl:`${location.hostname}${location.pathname}`,Referrer:e,UrlParams:Object.keys(t).length>0?t:void 0}}function f(){return/[\-]{3}.*personalizer\.io.*/.test(location.href)}g.push(...["fbclid","gclid","awc","smile_ref","epik","WickedID","cjevent","cjdata","_sid","_pos","_ke"].map((e=>e.toLowerCase()))),d.push(...["variant",...o.Vn].map((e=>e.toLowerCase()))),f()&&r.ZP.setSessionStorageValue("lsDesigner","true");const h={scriptHostUrl:a,scriptRootUrl:i,apiServerUrl:l,urlParams:c,platform:u,getUrlParam:p,removeUrlParam:m,processUrlParams:function(){for(const e of Object.keys(c))delete c[e];const e=o.Vn;for(let t=0;t<e.length;t++)c[e[t]]=p(e[t],!0);!function(){if(r.ZP.getSessionStorageObject("lsLandingDetails"))return;const e=c.lscmp,t=c.lscen;let n={PageViewDetails:S()};(e||t)&&(n={...n,UserID:c.lsusr,CampaignGuid:c.lscmp,CampaignEntryGuid:c.lscen,Source:(0,o.zQ)(c.lssrc),SourcePage:(0,o.yK)(c.lshst)});r.ZP.setSessionStorageObject("lsLandingDetails",n)}()},getLandingDetails:function(){return r.ZP.getSessionStorageObject("lsLandingDetails")},getPageInfo:S,isInDesigner:f}},2960:(e,t,n)=>{n.d(t,{G:()=>o});const o=window.LimeSpot.runtime},7926:(e,t,n)=>{n.d(t,{Vn:()=>o,yK:()=>s,zQ:()=>r});const o=["lsnote","lssrc","lshst","lscmp","lscen","lsusr","lslogview","lsctxid","lsob","lsrci","lsis"];function r(e){switch((e||"").toLowerCase()){case"related":return"Related";case"relevancev1":return"RelevanceV1";case"relevancev2":return"RelevanceV2";case"userinterest":return"UserInterest";case"articlerelated":return"ArticleRelated";case"crosssell":return"CrossSell";case"upsell":return"Upsell";case"boughttogether":return"BoughtTogether";case"othersalsoliked":return"OthersAlsoLiked";case"youmaylike":return"YouMayLike";case"popular":return"Popular";case"recentviews":return"RecentViews";case"recentpurchases":return"RecentPurchases";case"trending":return"Trending";case"newarrival":return"NewArrival";case"featuredcollection":case"featuredcollection1":return"FeaturedCollection1";case"featuredcollection2":return"FeaturedCollection2";case"featuredcollection3":return"FeaturedCollection3";case"featuredcollection4":return"FeaturedCollection4";case"external":case"externalsource":return"ExternalSource";case"googlesmartshopping":return"GoogleSmartShopping";case"googlestandardshopping":return"GoogleStandardShopping";case"googlefreelisting":return"GoogleFreeListing";case"curatedcollectionbox":return"CuratedCollectionBox";case"curatedcollectionpage":return"CuratedCollectionPage";case"cuclink":case"curatedcollectionlink":return"CuratedCollectionLink";case"pimg":case"personalizedimage":return"PersonalizedImage";case"phtml":case"personalizedhtml":return"PersonalizedHtml";default:return"StandardNavigation"}}function s(e){return(e||"").startsWith("/")?"OtherPages":"index"===(e||"").toLowerCase()?"Home":e}},6526:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(4808),r=n(6092);const s="lsEnforcedUserSegmentGuids",a=new r.X([]),i={update:({userSegmentGuids:e})=>{const t=o.ZP.getSessionStorageObject(s)||[];LimeSpot.Context.UserSegmentGuids=(e||[]).concat(t),o.ZP.setLocalStorageObject("lsContext",LimeSpot.Context),a.next(LimeSpot.Context.UserSegmentGuids)},userSegmentGuids:a,setEnforcedUserSegmentGuids:e=>{o.ZP.setSessionStorageObject(s,e||[])}}},6092:(e,t,n)=>{n.d(t,{X:()=>o});class o{constructor(e){this.value=e,this.observers=[]}subscribe(e){this.observers.push(e),e(this.value)}unsubscribe(e){this.observers=this.observers.filter((t=>t!==e))}next(e){this.value=e,this.observers.forEach((t=>t(e)))}getValue(){return this.value}}},4808:(e,t,n)=>{n.d(t,{I:()=>u,ZP:()=>g,_o:()=>c,jy:()=>a,uN:()=>s,v8:()=>l});var o=n(1064);function r(){try{return"object"==typeof window.localStorage&&"function"==typeof window.localStorage.getItem}catch(e){return!1}}function s(e,t,n){!n||t?r()?localStorage.setItem(e,t):(0,o.d8)(e,t):u(e)}function a(e,t){let n=null;return n=r()?localStorage.getItem(e):(0,o.ej)(e),t&&n&&u(e),n}function i(e){let t=null;return t=r()?sessionStorage.getItem(e):(0,o.ej)(e),t}function l(e,t,n){!n||t?r()?sessionStorage.setItem(e,t):(0,o.d8)(e,t):c(e)}function c(e){return r()?sessionStorage.removeItem(e):(0,o.nJ)(e)}function u(e){return r()?localStorage.removeItem(e):(0,o.nJ)(e)}const g={isLocalStorageSupported:r,setLocalStorageValue:s,getLocalStorageValue:a,setLocalStorageObject:function(e,t){if(t){s(e,JSON.stringify(t))}else u(e)},getLocalStorageObject:function(e,t){const n=a(e,t);if(!n)return null;try{return JSON.parse(n)}catch(e){return console.error(e),null}},removeLocalStorageValue:u,setSessionStorageValue:l,getSessionStorageValue:i,setSessionStorageObject:function(e,t){if(t){l(e,JSON.stringify(t))}else c(e)},getSessionStorageObject:function(e,t){const n=i(e);if(!n)return null;try{return JSON.parse(n)}catch(e){return console.error(e),null}},removeSessionStorageValue:c}},1064:(e,t,n)=>{function o(e,t,n,o){const r=new Date;r.setDate(r.getDate()+n);let s=escape(t)+(null==n||void 0===n?"":"; expires="+r.toUTCString());s+="; Path=/; SameSite=None; Secure",o&&(s+="; Domain="+o),document.cookie=e+"="+s}function r(e){let t,n,o;const r=document.cookie.split(";");for(t=0;t<r.length;t++)if(n=r[t].substr(0,r[t].indexOf("=")),o=r[t].substr(r[t].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n===e)return unescape(o)}function s(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}n.d(t,{ZP:()=>a,d8:()=>o,ej:()=>r,nJ:()=>s});const a={setCookie:o,getCookie:r,removeCookie:s}},2521:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(4808);function r(e,t,n){s()&&console.log(a()+` [LimeSpot/${e}]: `+t,n||"")}function s(){return"true"===o.ZP.getLocalStorageValue("lsTraceLogEnabled")}function a(){const e=new Date;let t=e.toTimeString().substr(0,8);return t+=":"+e.getMilliseconds().toString(),t}r("Logger","Started");const i={logDebug:r,logInfo:function(e,t,n){console.log(a()+` [LimeSpot/${e}]: `+t,n||"")},logWarn:function(e,t,n){console.warn(a()+` [LimeSpot/${e}]: `+t,n||"")},logError:function(e,t,n){console.error(a()+` [LimeSpot/${e}]: `+t,n||"")},toggleLogEnabled:function(){return o.ZP.setLocalStorageValue("lsTraceLogEnabled",s()?"false":"true"),s()}}},4755:(e,t,n)=>{function o(e,t){const n=((t||LimeSpot.Context||{}).Experiences||[]).find((t=>t.Module.toLowerCase()===e.toLowerCase()));return n&&n.Settings?n:{Settings:{}}}n.d(t,{ZP:()=>r,rT:()=>o});const r={getModule:o,setModule:function(e,t){LimeSpot.Context=LimeSpot.Context||{},LimeSpot.Context.Experiences=LimeSpot.Context.Experiences||[];let n=LimeSpot.Context.Experiences.find((t=>t.Module===e));n?(n.Settings=n.Settings||{},Object.assign(n.Settings,t)):(n={Module:e,Settings:t},LimeSpot.Context.Experiences.push(n))}}}},e=>{var t;t=4862,e(e.s=t)}]);