"use strict";(self.webpackChunklib=self.webpackChunklib||[]).push([[5617],{9685:(e,t,n)=>{var s=n(3494),r=n(4808),o=n(1064);const a="personalizer.io";function c(e,t){(0,r.uN)("lsUserID",e||""),(0,r.uN)("lsEncUserID",t||"");try{(0,o.d8)("lsUserID",e||"",365,a),(0,o.d8)("lsEncUserID",t||"",365,a)}catch{}}(0,s.XN)(((e,t,n,o)=>{switch(e){case"GetUserID":n({UserID:(0,r.jy)("lsUserID"),EncUserID:(0,r.jy)("lsEncUserID")});break;case"SyncUserID":const e=(0,r.jy)("lsUserID"),o=(0,r.jy)("lsEncUserID");e&&o&&+e!=+t.UserID?function(e,t,n){!function(e,t,n,r,o,a){t=s.Mj+t,o||(o=function(s,r,o){let a=s.responseText;if(void 0!==a)try{const e=JSON.parse(a);void 0!==e&&(a=e.Message)}catch(e){}else o?19===o.code?a="Method is undefined or Web API Server is not accessible at "+t:o.message&&(a=o.message):a="Unknown error!";const c=new Date,i=c.toTimeString().substr(0,8)+c.getMilliseconds().toString();n?console.error(`\n          ${i} [${e} ${t} ${JSON.stringify(n)}] - ${s.status} - ${a}`):console.error(`\n          ${i} [${e} ${t}] - ${s.status} - ${a}`)});const c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&(200===c.status?r&&r(JSON.parse(c.responseText)):204===c.status?r&&r():o(c,c.statusText,c.errorThrown))},a||(t=t+(t.indexOf("?")<0?"?":"&")+(new Date).getTime().toString());c.open(e,t,!0),c.setRequestHeader("X-Personalizer-Context-ID",s.Do.ContextID),c.setRequestHeader("Content-Type","application/json"),n?c.send(JSON.stringify(n)):c.send()}("PUT",t&&"undefined"!==t&&"null"!==t?"/v1/users?encConnectingUserID="+t:"/v1/users?connectingUserID="+e,null,(t=>{+t.UserID!=+e&&c(t.UserID,t.EncUserID),n({UserID:t.UserID,EncUserID:t.EncUserID})}))}(e,o,n):(c(t.UserID,t.EncUserID),n(null))}}))},3494:(e,t,n)=>{let s,r;n.d(t,{Do:()=>r,Mj:()=>s,XN:()=>a});const o={};function a(e){o.handleRequest=e}window.addEventListener("message",(e=>{if(!e||!e.data||"function"!=typeof e.data.indexOf||e.data.indexOf("LimeSpot")<0)return;const t=JSON.parse(e.data);if("*"===t.Target){if("SyncContext"===t.Command)s=t.ApiServerUrl,r=t.Context;return}if(t.Target!==function(e,t){void 0===t&&(t=location.search);if(e=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(t))return decodeURIComponent(e[1])}("channelID"))return;let n=e.origin;n&&"null"!==n||(n="*"),o.handleRequest(t.Method,t.Params,(e=>{parent.postMessage(JSON.stringify({Owner:"LimeSpot",CallbackID:t.SuccessCallbackID,Target:t.Source,Result:e}),n)}),((e,r,o)=>{const a=function(e,t,n){let r=e.responseText;if(r)try{r=JSON.parse(r).Message||""}catch(e){}else n?19===n.code?r="Method is undefined or Web API Server is not accessible at "+s:n.message&&(r=n.message):r="Unknown error!";return e.status+" - "+r}(e,0,o);a&&console.error(`LimeSpot ${t.Method}: ${a}`),parent.postMessage(JSON.stringify({Owner:"LimeSpot",CallbackID:t.ErrorCallbackID,Target:t.Source,Result:{Xhr:e,TextStatus:r,ErrorThrown:o}}),n)}))}),!1)},4808:(e,t,n)=>{n.d(t,{I:()=>u,ZP:()=>g,_o:()=>l,jy:()=>a,uN:()=>o,v8:()=>i});var s=n(1064);function r(){try{return"object"==typeof window.localStorage&&"function"==typeof window.localStorage.getItem}catch(e){return!1}}function o(e,t,n){!n||t?r()?localStorage.setItem(e,t):(0,s.d8)(e,t):u(e)}function a(e,t){let n=null;return n=r()?localStorage.getItem(e):(0,s.ej)(e),t&&n&&u(e),n}function c(e){let t=null;return t=r()?sessionStorage.getItem(e):(0,s.ej)(e),t}function i(e,t,n){!n||t?r()?sessionStorage.setItem(e,t):(0,s.d8)(e,t):l(e)}function l(e){return r()?sessionStorage.removeItem(e):(0,s.nJ)(e)}function u(e){return r()?localStorage.removeItem(e):(0,s.nJ)(e)}const g={isLocalStorageSupported:r,setLocalStorageValue:o,getLocalStorageValue:a,setLocalStorageObject:function(e,t){if(t){o(e,JSON.stringify(t))}else u(e)},getLocalStorageObject:function(e,t){const n=a(e,t);if(!n)return null;try{return JSON.parse(n)}catch(e){return console.error(e),null}},removeLocalStorageValue:u,setSessionStorageValue:i,getSessionStorageValue:c,setSessionStorageObject:function(e,t){if(t){i(e,JSON.stringify(t))}else l(e)},getSessionStorageObject:function(e,t){const n=c(e);if(!n)return null;try{return JSON.parse(n)}catch(e){return console.error(e),null}},removeSessionStorageValue:l}},1064:(e,t,n)=>{function s(e,t,n,s){const r=new Date;r.setDate(r.getDate()+n);let o=escape(t)+(null==n||void 0===n?"":"; expires="+r.toUTCString());o+="; Path=/; SameSite=None; Secure",s&&(o+="; Domain="+s),document.cookie=e+"="+o}function r(e){let t,n,s;const r=document.cookie.split(";");for(t=0;t<r.length;t++)if(n=r[t].substr(0,r[t].indexOf("=")),s=r[t].substr(r[t].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n===e)return unescape(s)}function o(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}n.d(t,{ZP:()=>a,d8:()=>s,ej:()=>r,nJ:()=>o});const a={setCookie:s,getCookie:r,removeCookie:o}}},e=>{var t;t=9685,e(e.s=t)}]);