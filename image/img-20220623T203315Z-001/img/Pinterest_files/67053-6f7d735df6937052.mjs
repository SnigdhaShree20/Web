(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[67053],{408330:(e,t,o)=>{o.d(t,{eN:()=>c,_:()=>u,kB:()=>l});var a=o(172071),n=o(966113),s=o(925927);const r=["/resource/:name/:method/","/resource/commerce/:name/:method/","/:username/pins/follow/","/email/remove/","/about/trademark/form/:claim_type/","/about/copyright/dmca-pin/web-result/:id/","/about/copyright/dmca-pin/pin/:id/","/about/copyright/dmca-pin/","/about/koplg/","/about/:lawName/","/about/radtc/","/suspension-appeal/netzdg/","/website/confirm/","/oauth/","/app-factory-oauth/","/settings/extension/uninstall/","/offsite/","/amp/(.*)"];var i=o(826067);const c=e=>e&&(0,i.Qg)(e)&&n.Z.settings.PASSWORD_RESET_URL!==e?(0,i.Qc)(e).relative:"/",l=e=>{const t=(0,i.Jx)(e);return(e=>{const t=new URL(e,window.location.origin);return r.some((e=>!!(0,s.LX)(t.pathname,{path:e,exact:!0})))})(t)||(0,i.OM)(t)===i.vx.TRUSTED_DIFFERENT_ORIGIN},u=({forceFullPageNavigation:e,history:t,next:o,noLocationReplace:n})=>{const s=(0,i.Jx)(o);l(o)||!t||e?(e&&a.Z.increment("webapp.duplo.navigateOnLogin.forceFullPageNavigation",1),window.location.assign(s)):n?t.push(c(s)):t.replace(c(s))}},967053:(e,t,o)=>{o.d(t,{Pt:()=>N,x4:()=>v,xs:()=>L});var a=o(231486),n=o(6637),s=o(371415),r=o(743413),i=o(983360),c=o(628551),l=o(290148),u=o(81759),_=o(408330),d=o(957191),g=o(630135),p=o(643010),m=o(539278),h=o(396910),f=o(330102),w=o(297507),k=o(3223),E=o(693099),T=o(867820),A=o(226198),R=o(969230),y=o(408285),b=o(957161);const O=(e,t,o)=>({type:i.Df,payload:{user:e,active:t,triggerable:o}}),v=(e,t,o="/",i={isAutologin:!1,isSwitchAccount:!1,goToAccountSettings:!1,noLocationReplace:!1,recaptchaV3Token:"default",noImmediateRedirect:!1,useAlternativeResourceCall:!1,trigger:"other",accountUnlinked:!1})=>async(p,v)=>{const{session:N}=v(),{country:L,country_from_hostname:P,country_from_ip:S,region_from_ip:C}=N,x=!N.isTablet&&!N.isMobile,{isAutologin:I,isSwitchAccount:D,goToAccountSettings:U,noLocationReplace:Z,recaptchaV3Token:M,noImmediateRedirect:F,useAlternativeResourceCall:G,trigger:z,accountUnlinked:j}=i,B=(0,h.lJ)(N.origin)&&!1;let H={get_user:!0,...e,app_type_from_client:6,recaptchaV3Token:M};const $=(0,u.t_)();$&&(H={...H,visited_pages_before_login:$});let W=B?(0,h.N5)({referrer:N.referrer,facebook_id:N.facebookToken,...e,recaptchaV3Token:M}):n.ZP.create("UserSessionResource",H).callCreate();if(G&&e.username_or_email&&e.password){const t=new FormData;t.append("username",e.username_or_email),t.append("password",e.password);const o={method:"POST",body:t,credentials:"include",headers:{Accept:"application/json, text/javascript, */*","X-CSRFToken":(0,c.getCsrfToken)()||"","X-Requested-With":"XMLHttpRequest"}};W=fetch("/resource/UserSessionResource/create/",o).then((e=>{if(200!==e.status){const t=new Error(e.statusText);throw t.response=e,t}return e.json()})).catch((e=>Promise.reject(e)))}try{I&&(0,T.dy)({event:"login_api_call_start",provider:e.google_open_id_token?"google":"facebook"});const n=await W;I&&(0,T.dy)({event:"login_api_call_success",provider:e.google_open_id_token?"google":"facebook"}),p(O(n.resource_response.data.user,n.client_context.active_experiments,n.client_context.triggerable_experiments)),p((0,d.OD)(n.client_context.placed_experiences)),(0,s.Z)("authentication.login_success"),(0,R.h3)({action:I?"autologin":"login",type:(0,l.lp)(e),trigger:z}),a.zN(A.e7.name),a.zN(A.x3.name),(0,b.Nh)(E.AA,1),"/"!==o&&(0,g.E)(!0),D?(0,y.Dm)().then((()=>{const e=U?`/settings/account-settings/?message=${m.pN}`:`/${n.resource_response.data.user.username}`+(j?`?message=${m.aU}`:"");window.location.href=e})):I&&!x||F||(0,_._)({forceFullPageNavigation:x,history:t,next:o,noLocationReplace:Z}),(0,k.c_)({country:L,countryFromHostName:P,countryFromIp:S})&&(0,w.yP)({id:r.gC,eventCategory:"Logins",eventName:"Mobile"}),(0,k.$r)({country:L,countryFromHostName:P,countryFromIp:S,regionFromIp:C})&&(0,w.jw)({id:"flashtalking-m-login",eventCategory:"Logins",eventName:"Mobile"}),(0,k.NR)(L,C)&&(0,w.EN)({pixelId:f.Rj,eventCategory:"Logins",eventName:"Mobile"}),(0,k.Fc)({country:L,countryFromHostName:P,countryFromIp:S})&&(0,w.Be)({pixelId:f.HO,eventCategory:"Logins",eventName:"Mobile"})}catch(Y){if(I&&(0,T.dy)({event:"login_api_call_failure",provider:e.google_open_id_token?"google":"facebook"}),1201!==Y.apiErrorCode||I)throw(0,R.wp)({action:I?"autologin":"login",type:(0,l.lp)(e),trigger:z}),D&&(0,s.Z)("authentication.login_error"),Y;e.google_open_id_token&&(e.gplus_id_token=e.google_open_id_token),t&&t.push({pathname:"/login/mfa/",state:{creds:e,next:o,phoneNumber:Y.data.phone_number_end}})}},N=(e={logoutOnAbort:!1})=>async(t,o)=>{const{session:r}=o(),{redirectUrl:i,localStorageItems:c,logoutOnAbort:l,reason:u="user_initiated",source:_}=e,d=!r.isTablet&&!r.isMobile;(0,T.tj)("logout.attempt",{tags:{app:"web_mobile",reason:u,source:_}});try{await n.ZP.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete()}catch(m){if(!l||"abort"!==(null==m?void 0:m.type))throw(0,T.tj)("logout.error",{tags:{app:"web_mobile",reason:u,source:_}}),m;(0,s.Z)("logout.logout_ignored")}if((0,s.Z)("logout.logout_success"),(0,T.tj)("logout",{tags:{app:"web_mobile",reason:u,source:_}}),a.t8(A.e7,"True",(0,a.kZ)(A.e7)),(0,g.E)(!1),(0,b.L_)(p.Uf),(0,b.L_)(E.E9),(0,b.L_)(y.RH),(0,b.L_)(void 0),(0,b.L_)("_epik_localstore"),c)for(const e in c)(0,b.Nh)(e,c[e]);await(0,y.Dm)(),i?window.location.href=i:d&&(window.location.href="/")},L=e=>t=>{t(O(e.resource_response.data.user,e.client_context.placed_experiences,e.client_context.active_experiments)),t((0,d.OD)(e.client_context.placed_experiences))}},332730:(e,t,o)=>{o.d(t,{Z:()=>r});var a=o(56641),n=o(954931),s=o(867820);const r=e=>{(0,n.Z)(e)||(e="/",(0,s.My)("url_reset")),(0,a.Z)(e,!1)}},539278:(e,t,o)=>{o.d(t,{Di:()=>d,Jl:()=>l,R:()=>u,ZP:()=>f,aU:()=>g,j2:()=>_,pN:()=>p,rL:()=>w,vW:()=>h});var a=o(116303),n=o(499128),s=o(349700),r=o(826067),i=o(883119),c=o(785893);const l=7e3,u="permanent_account_closure",_="account_deletion_email_sent",d="account_deactivated",g="unlink_successful",p="account_switch_to_settings";function m(e,t,o){return(0,c.jsx)(i.xv,{align:o||"center",children:(0,s.nk)(e,{username:(0,c.jsx)(i.xv,{inline:!0,weight:"bold",children:t})})})}function h({i18n:e,message:t,multipleAccounts:o,username:a=""}){switch(t){case u:return e._('Your account has been deleted. We\'re sad to see you go', 'unauthLoginPage.accountDeletedToast.message', 'Confirmation message after a user has successfully deleted their account');case _:return m(o?e._('An email has been sent with final steps to delete your account, {{username}} and its linked accounts', 'accountDeletedEmailToast.message.multipleAccounts', 'Confirmation message after a user has successfully requested multiple accounts deletion'):e._('An email has been sent with final steps to delete your account, {{username}}', 'accountDeletedEmailToast.message.singleAccount', 'Confirmation message after a user has successfully requested a single account deletion'),a);case d:return m(o?e._('The account, {{username}}, and its associated linked accounts have been deactivated', 'unauthLoginPage.deactivatedToast.message.multipleAccounts', 'Confirmation message after a user has successfully deactivated multiple accounts'):e._('The account, {{username}}, has been deactivated', 'unauthLoginPage.deactivatedToast.message.singleAccount', 'Confirmation message after a user has successfully deactivated a single account'),a);case g:return m(e._('Success! You\'ve unlinked this business account. You are currently in {{username}}.', 'authHomeFeedPage.unlinkAccountToast.message', 'Confirmation message after a user has successfully unlinked business account'),a,"start");case p:return m(e._('You\'ve switched into and are currently in the account {{username}}', 'accountSettings.switchAccountToAccountChanges', 'Confirmation message after a user has successfully switched accounts and got redirected to Account Changes'),a,"start");default:return""}}function f(e,t,o=""){if(!t||!t.search)return"";const a=(0,r.mB)(t.search).message,n=(0,r.mB)(t.search).username||o;return h({i18n:e,message:a,multipleAccounts:"true"===(0,r.mB)(t.search).multiple_accounts,username:n})}function w({showOneToast:e,i18n:t,location:o,history:s,username:i,fullName:u,avatarUrl:_}){if(!o||!o.search)return;const d=f(t,o,i||""),m=(0,r.mB)(o.search).message,h=m===p||m===g;d&&(e((({hideToast:e})=>(0,c.jsx)(n.ZP,{duration:l,onHide:e,text:d,iconThumbnail:h?(0,c.jsx)(a.Z,{name:u||"",src:_||"",size:"md"}):null}))),s.replace(o.hash?`${o.pathname}${o.hash}`:o.pathname))}},396910:(e,t,o)=>{o.d(t,{N5:()=>_,$p:()=>d,lJ:()=>l,VY:()=>g});var a=o(172071),n=o(6637),s=o(966113);const r=e=>Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&"),i=(e,t,o)=>new Promise(((a,n)=>{const s=new XMLHttpRequest;s.withCredentials=!0,s.open(t,e),"POST"===t&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),s.onload=()=>{try{const e=JSON.parse(s.responseText);"success"===e.status?a(e):n({apiErrorCode:e.code,httpStatus:s.status,...e})}catch(e){n({httpStatus:s.status,message:e.message})}},s.onerror=()=>n(s.statusText),s.send(o)})),c=(e,t,o)=>{a.Z.increment(`client.events.login.${t?"auto":"manual"}.${e}`,1,{source:o})},l=e=>s.Z.settings.CORS_HANDSHAKE_DOMAINS.includes(e),u=e=>n.ZP.create("HandshakeSessionResource",{token:e,get_user:!0}).callCreate(),_=e=>{const t={};let o=!1;const a=e.facebook_id?"facebook/handshake":e.gplus_id_token?"gplus/handshake":e.mfa_token?"mfa/handshake":"handshake";if(e.username_or_email&&(t.username_or_email=e.username_or_email.trim(),t.password=e.password,t.referrer=e.referrer,t.token=e.recaptchaV3Token),e.facebook_id){o=e.facebook_autologin||!1;const a=e.facebook_token||"";t.facebook_id=e.facebook_id,t.facebook_token=a,t.facebook_autologin=o}e.gplus_id_token&&(o=e.gplus_autologin||!1,t.gplus_id_token=e.gplus_id_token,t.gplus_access_token=e.gplus_access_token,t.gplus_expires_at=e.gplus_expires_at,t.gplus_autologin=o),e.mfa_token&&(t.mfa_token=e.mfa_token);const n=`/v3/login/${a}/`;return c("attempt",o,n),i(`${s.Z.settings.ACCOUNTS_PINTEREST_URL}${n}`,"POST",r(t)).then((e=>{if(c("success",o,n),e&&e.data)return u(e.data);throw new Error("No custom access token in cross domain login response")})).catch((e=>{throw c("failure",o,n),e}))},d=e=>{const t={},o=e.facebook_id?"facebook/handshake":e.gplus_code||e.gplus_id_token?"gplus/handshake":"email/handshake";if(t.email=e.email||"",t.username=e.username||"",t.password=e.password||"",t.first_name=e.first_name||"",t.last_name=e.last_name||"",t.country=e.country||"",t.locale=e.locale,t.referrer=e.referrer,e.age&&(t.birthday=(e=>{const t=new Date;return t.setFullYear(t.getFullYear()-parseInt(e,10)),parseInt(t/1e3,10).toString()})(e.age)),e.custom_gender&&(t.custom_gender=e.custom_gender),e.gender&&(t.gender=e.gender),e.invite_code&&(t.invite_code=e.invite_code),e.facebook_id){const o=e.facebook_token||"";t.facebook_id=e.facebook_id,t.facebook_token=o,t.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(t.password=e.password||"",t.one_time_code=e.gplus_code,t.id_token=e.gplus_id_token,t.redirect_uri=e.gplus_redirect_uri);return e.recaptchaV3Token&&(t.recaptcha_v3_token=e.recaptchaV3Token),i(`${s.Z.settings.ACCOUNTS_PINTEREST_URL}/v3/register/${o}/`,"POST",r(t)).then((e=>{if(e&&e.data)return u(e.data);throw new Error("No custom access token in cross domain register response")})).catch((e=>{throw e}))},g=()=>i(`${s.Z.settings.ACCOUNTS_PINTEREST_URL}/v3/handshake/verify/`,"GET").then((e=>{if(e&&e.data)return u(e.data);throw new Error("No custom access token in cross domain verify response")})).catch((e=>{throw e}))},290148:(e,t,o)=>{o.d(t,{Ny:()=>g,ZP:()=>m,eD:()=>f,lp:()=>h});var a=o(231486),n=o(794230),s=o(704115),r=o(332730),i=o(6637),c=o(704177),l=o(966113),u=o(226198),_=o(45169),d=o(867820);const g=Object.freeze({SOFT_BANNED:0,RATE_LIMITED:1,LOGIN_ASSISTANCE:2,PASSWORD_RESET_SENT:3,PREVENT_FACEBOOK_REGISTER:4,PREVENT_GOOGLE_REGISTER:5,SUSPENDED:6});class p{static defaultLoginRedirectUrl(){return window.location.pathname===l.Z.settings.PASSWORD_RESET_URL||window.location.pathname===l.Z.settings.LOGIN_URL||window.location.pathname.startsWith(l.Z.settings.ADD_SECONDARY_ACCOUNT_PAGE)?"/":window.location.pathname+window.location.search}static defaultSocialLoginRedirectUrl(){return window.location.pathname.startsWith(l.Z.settings.ADD_SECONDARY_ACCOUNT_PAGE)?"/":window.location.pathname}static isExceedRecaptchaLocalLimit(){const e=c.ZP.localStorage.getItem("urh");if(e&&e.indexOf("|")>-1){const t=e.split("|");return 3===t.length&&(new Date).getTime()/1e3-parseInt(t[0],10)<=3600}return!1}static updateRecaptchaTimeStamp(){const e=c.ZP.localStorage.getItem("urh");let t=[];e&&(t=e.split("|"),3===t.length&&t.shift());const o=((new Date).getTime()/1e3).toString();t.push(o);const a=t.join("|");c.ZP.localStorage.setItem("urh",a)}static isFullyLoggedIn(e,t){return e&&1===t}static handleRedirect(e){if(!e){e="/";const t=(0,s.Z)();if(t){const o=t.next;o&&(e=o,delete t.next),e=(0,n.Z)(e,t)}}(0,r.Z)(e)}static handleRedirectWithFallbackWindowLocation(){this.handleRedirect(this.defaultLoginRedirectUrl())}static handleSignupRedirect(e,t){c.ZP.localStorage.setItem("signupTime",Date.now()),!t&&e&&"/"!==e?p.handleRedirect(e):p.handleRedirect("/")}static storeLoginCredentialsToBrowser(e){if(navigator.credentials&&e.username_or_email)try{const t=new window.PasswordCredential({id:e.username_or_email,password:e.password});navigator.credentials.store(t).then((()=>{(0,d.My)("navigatorCredentials.store.success")}))}catch(t){(0,d.My)("navigatorCredentials.store.error")}}static retrieveLoginCredentialsFromBrowser(){const e=window.navigator.credentials;if(!e)return new Promise(((e,t)=>{t()}));return e.get({password:!0,mediation:"silent"})}static attemptLoginWithBrowserCredentials(e,t,o){if(!e)return new Promise(((e,t)=>{t("No credentials")}));let a,n;e.password?(n="include",a=new FormData,a.append("username",e.id),a.append("password",e.password)):n=e;return fetch("/resource/UserSessionResource/create/",{method:"POST",body:a,credentials:n,headers:{Accept:"application/json, text/javascript, */*","X-CSRFToken":t||"","X-Pinterest-AppState":o,"X-Requested-With":"XMLHttpRequest"}}).then((e=>{if(200!==e.status){const t=new Error(e.statusText);throw t.response=e,t}return(0,d.My)("navigatorCredentials.login.success"),e.json()})).catch((e=>((0,d.My)("navigatorCredentials.login.failure"),Promise.reject(e))))}static fetchRecentlyLoggedOutUser(e){if(e)return Promise.reject();const t=i.ZP.create("UnauthUserDataResource");return new Promise(((e,o)=>{t.callGet().then((t=>{const n=t.resource_response.data,s=!!a.U2(u.x3);return n?(n.connected_to_facebook||n.connected_to_google||n.has_password||(0,d.My)("unauth.personalized_login.no_login_methods_found"),(0,d.My)("unauth.personalized_login.fetch_user_info.info.user_info_found.logged_out_cookie_"+(s?"true":"false")),e(n)):((0,d.My)("unauth.personalized_login.fetch_user_info.info.no_user_info.logged_out_cookie_"+(s?"true":"false")),o({}))})).catch((e=>{if(e.message){const t=e.message.replace(/\s/g,"_").toLowerCase();(0,d.My)(`unauth.personalized_login.fetch_user_info.error.${t}`)}else(0,d.My)("unauth.personalized_login.fetch_user_info.error.unknown");return o(e)}))}))}static handleLoginMfa(e,t,o){(0,d.My)("multi_step_login"),p.storeLoginCredentialsToBrowser(e),o?o(e,t):(0,d.My)("unauth.login.error.CLIENT_ERROR.null_mfa_handler")}}const m=p;function h(e){return e.facebook_id?_.sr.FACEBOOK:e.google_open_id_token?_.sr.GOOGLE_ONE_TAP:e.gplus_id_token?_.sr.GOOGLE:e.line_id_token?_.sr.LINE:e.username_or_email?_.sr.EMAIL:_.sr.OTHER}function f(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":h(e)}},45169:(e,t,o)=>{o.d(t,{E_:()=>l,NN:()=>i,du:()=>c,sR:()=>r,sr:()=>s});var a=o(966113),n=o(693099);const s={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",LINE:"line",EMAIL:"email",OTHER:"other"},r=e=>e.facebook_id?s.FACEBOOK:e.google_open_id_token?s.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?s.GOOGLE:e.line_id_token?s.LINE:e.email?s.EMAIL:s.OTHER,i=(e="")=>e in a.Z.settings.MINIMUM_AGE_BY_EU_COUNTRY,c=e=>n.rT.includes(e)||n.ZR.has(e)||i(e),l={GOOGLE:"g",FACEBOOK:"fb",PINTEREST:"p",APPLE:"apl",LINE:"ln",UNKNOWN:"unk"}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/67053-6f7d735df6937052.mjs.map