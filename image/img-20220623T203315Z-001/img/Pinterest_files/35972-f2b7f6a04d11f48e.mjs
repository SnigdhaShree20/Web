(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[35972,72913],{482131:(e,t,n)=>{n.d(t,{CA:()=>L,Tb:()=>b,Tx:()=>x,Y:()=>v,kz:()=>y});var a,i,r,o,s=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},c=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},d=function(e,t){var n=function n(a){"pagehide"!==a.type&&"hidden"!==document.visibilityState||(e(a),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},l=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},u=function(e,t,n){var a;return function(i){t.value>=0&&(i||n)&&(t.delta=t.value-(a||0),(t.delta||void 0===a)&&(a=t.value,e(t)))}},m=-1,p=function(){return"hidden"===document.visibilityState?0:1/0},f=function(){d((function(e){var t=e.timeStamp;m=t}),!0)},g=function(){return m<0&&(m=p(),f(),l((function(){setTimeout((function(){m=p(),f()}),0)}))),{get firstHiddenTime(){return m}}},v=function(e,t){var n,a=g(),i=s("FCP"),r=function(e){"first-contentful-paint"===e.name&&(d&&d.disconnect(),e.startTime<a.firstHiddenTime&&(i.value=e.startTime,i.entries.push(e),n(!0)))},o=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],d=o?null:c("paint",r);(o||d)&&(n=u(e,i,t),o&&r(o),l((function(a){i=s("FCP"),n=u(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-a.timeStamp,n(!0)}))}))})))},h=!1,T=-1,y=function(e,t){h||(v((function(e){T=e.value})),h=!0);var n,a=function(t){T>-1&&e(t)},i=s("CLS",0),r=0,o=[],m=function(e){if(!e.hadRecentInput){var t=o[0],a=o[o.length-1];r&&e.startTime-a.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,o.push(e)):(r=e.value,o=[e]),r>i.value&&(i.value=r,i.entries=o,n())}},p=c("layout-shift",m);p&&(n=u(a,i,t),d((function(){p.takeRecords().map(m),n(!0)})),l((function(){r=0,T=-1,i=s("CLS",0),n=u(a,i,t)})))},_={passive:!0,capture:!0},S=new Date,E=function(e,t){a||(a=t,i=e,r=new Date,C(removeEventListener),w())},w=function(){if(i>=0&&i<r-S){var e={entryType:"first-input",name:a.type,target:a.target,cancelable:a.cancelable,startTime:a.timeStamp,processingStart:a.timeStamp+i};o.forEach((function(t){t(e)})),o=[]}},A=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){E(e,t),i()},a=function(){i()},i=function(){removeEventListener("pointerup",n,_),removeEventListener("pointercancel",a,_)};addEventListener("pointerup",n,_),addEventListener("pointercancel",a,_)}(t,e):E(t,e)}},C=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,A,_)}))},x=function(e,t){var n,r=g(),m=s("FID"),p=function(e){e.startTime<r.firstHiddenTime&&(m.value=e.processingStart-e.startTime,m.entries.push(e),n(!0))},f=c("first-input",p);n=u(e,m,t),f&&d((function(){f.takeRecords().map(p),f.disconnect()}),!0),f&&l((function(){var r;m=s("FID"),n=u(e,m,t),o=[],i=-1,a=null,C(addEventListener),r=p,o.push(r),w()}))},I=new Set,b=function(e,t){var n,a=g(),i=s("LCP"),r=function(e){var t=e.startTime;t<a.firstHiddenTime&&(i.value=t,i.entries.push(e)),n()},o=c("largest-contentful-paint",r);if(o){n=u(e,i,t);var m=function(){I.has(i.id)||(o.takeRecords().map(r),o.disconnect(),I.add(i.id),n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,m,{once:!0,capture:!0})})),d(m,!0),l((function(a){i=s("LCP"),n=u(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-a.timeStamp,I.add(i.id),n(!0)}))}))}))}},L=function(e){var t,n=s("TTFB");t=function(){try{var t=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,t={entryType:"navigation",startTime:0};for(var n in e)"navigationStart"!==n&&"toJSON"!==n&&(t[n]=Math.max(e[n]-e.navigationStart,0));return t}();if(n.value=n.delta=t.responseStart,n.value<0)return;n.entries=[t],e(n)}catch(e){}},"complete"===document.readyState?setTimeout(t,0):addEventListener("pageshow",t)}},404646:(e,t,n)=>{n.d(t,{cA:()=>R,fM:()=>j,N5:()=>O});var a=n(667294),i=n(991067);const r=e=>{const{deviceType:t,isBot:n,isSocialBot:a}=e;return`coreWebVitalsLite.v1.${(a?"socialBot":n&&"bot")||"nonbot"}.${t}`};var o=n(172071),s=n(31062),c=n(383434),d=n(482131);const l=(0,c.X)("LayoutShiftDebugger"),u=e=>e instanceof HTMLElement&&e.dataset&&(e.dataset.layoutShiftBoundaryId||e.dataset.testId)||e.parentNode&&u(e.parentNode)||null,m=e=>Math.round(1e3*e);let p=[];const f=({staticContext:e,getCurrentRoute:t,getLastNavigationTime:n})=>{const a=(0,s.Jx)({annotateMarks:["initialAppLoad","RenderReactContainer"],name:"cumulative_layout_shift",pwtStaticContext:e});let i=0;const c=e=>{i=e.timeStamp};window.addEventListener("scroll",c),window.addEventListener("beforeunload",(()=>{window.removeEventListener("scroll",c)}));const f=`${r(e)}.CLS`,g=()=>(e=>{let t=Object.freeze({}),n=0;p.forEach((({value:e,shift:{sources:a},route:i,hadRecentNavigation:r,hadRecentScroll:o})=>{if(n+=e,!a||!a.length)return;const s=e/a.length;a.forEach((({node:e})=>{const n=e?u(e)||"ROOT":"NODE_REMOVED",a={route:i,boundaryId:n,hadRecentNavigation:r,hadRecentScroll:o},c=JSON.stringify(a);t={...t,[c]:{score:((t[c]||{}).score||0)+s,tags:a}}}))})),Object.keys(t).forEach((n=>{const{score:a,tags:i}=t[n];o.Z.count(`${e}.shifts`,m(a),1,{...i})})),l("Debug CLS boundaries",n,t,p),p=[]})(f);let v,h,T=0,y=0,_=0;(0,d.kz)((({entries:e,value:a})=>{if(_=a||0,e.length){v=t(),h=n();const r=e[0].startTime,o=T!==r,s=o?e:e.slice(y);o&&(T=r),p=p.concat(s.map((e=>({value:a,shift:e,route:v,hadRecentNavigation:h>0&&h+500>e.startTime,hadRecentScroll:i>0&&i+500>e.startTime})))),y=e.length}}),!0);const S=setInterval((()=>{if(p.length){g();const t=(e=_)<=.1?"good":e<=.25?"adequate":"poor";o.Z.count(`${f}.${t}`,1,1),a.stop(m(_))}var e}),1e3);window.addEventListener("beforeunload",(()=>{clearInterval(S),0===_&&a.abort("no_shifts_detected")}))};var g=n(311560);var v=n(156381);const h={pin_closeup:{LCP:"pin_closeup_lcp",FID:"pin_closeup_fid"},board:{LCP:"board_lcp",FID:"board_fid"},other_profile:{LCP:"other_profile_lcp",FID:"other_profile_fid"},topic:{LCP:"topic_lcp",FID:"topic_fid"}},T=["CA","GB","DE","FR","AU","JP","BR","MX"],y=({surface:e,isAuthenticated:t})=>{if(t)return[];switch(e){case"pin_closeup":return["mweb_pin_page_ssr_lite"];default:return[]}},_=({pwtStaticContext:e,surface:t})=>{const n="pin_closeup"===t||"board"===t||"other_profile"===t||"topic"===t?(({pwtStaticContext:e,surface:t})=>{const n=(0,s.Jx)({annotateExperiments:y({surface:t,isAuthenticated:e.isAuthenticated}),annotateResourceTimingForSurface:t,annotateMarks:["initialAppLoad","RenderReactContainer",...e.isAuthenticated?[]:["firstClientRenderUnauthPageWrapper","mountUnauthPageWrapper"],..."pin_closeup"===t?["firstClientRenderCloseupPage","firstClientRenderCloseupImage"]:[]],name:h[t].LCP,pwtStaticContext:e}),a=(0,s.Jx)({name:h[t].FID,pwtStaticContext:e});return(e,t)=>{"LCP"===e?n.stop(t):"FID"===e&&a.stop(t)}})({pwtStaticContext:e,surface:t}):null,{isAuthenticated:a,isBot:i,isSocialBot:c,deviceType:l,locale:u}=e,m=u.split("-")[1],p={},f=(s,d)=>{if(!p[s]){p[s]=!0;const u=r(e);if("LCPCount"===s){const e=`${u}.${t}.${s}`;o.Z.count(`${e}.sum`,d,1),o.Z.increment(`${e}.size`,1)}else o.Z.timing(`${u}.${t}.${s}`,d,1),!a&&T.includes(m)&&(({botType:e,deviceType:t,isChrome:n,region:a})=>{const i=`pwtlogger.${e}.${t}`,r=["all",...a?[a.toLowerCase()]:[]],o=["all",...n?["chrome"]:[]],s=[];return r.forEach((e=>{o.forEach((t=>{s.push(`${i}.region_${e}.browser_${t}`)}))})),s})({botType:(c?"socialBot":i&&"bot")||"nonbot",deviceType:l,isChrome:!0,region:(0,g.Z)(m)}).forEach((e=>{o.Z.timing(`${e}.tags.growthSEO.${t}_${s}`,d,1,{country:m})})),n&&n(s,d)}};(0,d.Tx)((({value:e})=>f("FID",(e=>Number(e.toFixed(2)))(e)))),(0,d.Tb)((({value:e})=>{f("LCPCount",(0,v.Kj)()),f("LCP",(e=>10*Math.round(e/10))(e))})),(0,d.Y)((({value:e})=>f("FCP",e)))};var S=n(790348);let E=null;const w=e=>{switch(e){case"/":return"homefeed";case"/pin/:id":return"pin_closeup";case"/pin/:id/visual-search":return"flashlight";case"/:username/:slug":return"board";case"/:username":return"other_profile";case"/search/:scope":return"search";case"/topics/:interest":return"topic";default:return null}};var A=n(969853),C=n(543059),x=n(7789),I=n(22773),b=n(925927),L=n(785893);const N=(0,a.createContext)(null),M=(0,a.createContext)(null);function R({children:e,immutableLocation:t,resourceTimingCacheSize:n,routerHistoryAction:r,staticContext:o}){const c=(0,a.useRef)(null),d=(0,a.useRef)(null),l=(0,a.useRef)(t),u=(0,a.useRef)(!0),{path:m}=(0,b.$B)(),p=(0,a.useRef)(m),g=!o.isCachedRender&&(0,i.Z)(o.deviceType);if((0,a.useEffect)((()=>{p.current=m}),[m]),(0,a.useEffect)((()=>{if((0,I.X_)({size:n||1e3}),(0,v.UQ)(),(0,S.A9)("totalSessionVolume"),window.performance?["clearMarks","clearMeasures","clearResourceTimings","getEntries","getEntriesByName","getEntriesByType","mark","measure","now","setResourceTimingBufferSize"].forEach((e=>{window.performance[e]||(0,S.A9)(`not_supported.window.performance.${e}`)})):(0,S.A9)("not_supported.window.performance"),window.PerformanceObserver||(0,S.A9)("not_supported.window.PerformanceObserer"),(0,A.v)()||(0,S.A9)("not_supported.grid_profiler"),u.current=!1,g&&!x.is){if(((e,t)=>{let n,a=0,i=0,r=null,o=null,c=null,d=null,l=[];const u=()=>{i+=1,c=window.requestAnimationFrame(u)},m=()=>{if(d){const n=l.some((e=>null!==r&&r-e>0&&r-e<=500)),i=t(),{isAuthenticated:c}=e;if(n){const t=(0,s.Jx)({name:"scroll_session",pwtStaticContext:e});if(!t)return;const n={surface:i,isAuthenticated:c};if(null===r||null===o||0===a)if(null===r&&null===o)t.error("no_duration",n);else if(null==r)E=o,t.error("no_start",n);else if(null==o){let e;e=E&&r-E<750?"no_end.outside_window":"no_end.single_event",t.error(e,n)}else t.error("no_frames",n);else{E=o;const e=o-r,s=e/a;0===s?t.error("zero_value",n):s<0?t.error("negative_value",n):(t.addBinaryAnnotation("surface",i,"STRING"),t.addBinaryAnnotation("isAuthenticated",c,"BOOL"),t.addBinaryAnnotation("duration_ms",e,"I32"),t.addBinaryAnnotation("total_frames_rendered",a,"I16"),t.stop(s))}}else(0,S.A9)("WARN.scroll_session.not_user",{tags:{isAuthenticated:c,surface:i}})}window.cancelAnimationFrame(c),a=0,i=0,l=[],o=null,r=null,d=null},p=({timeStamp:e})=>{n&&clearTimeout(n),n=setTimeout(m,500),null===d?(d=100*Math.random()<10,d&&(c=window.requestAnimationFrame(u),r=e)):d&&(o=e,a+=i,i=0)},f=({timeStamp:e})=>{l.push(e)};["wheel","pointerdown","keydown"].forEach((e=>{window.addEventListener(e,f,{passive:!0,capture:!0})})),window.addEventListener("scroll",p,{passive:!0}),window.addEventListener("pagehide",(()=>{window.removeEventListener("scroll",p),["wheel","pointerdown","keydown"].forEach((e=>{window.removeEventListener(e,f)}))}))})(o,(()=>w(p.current)?w(p.current)||"UNKNOWN_SURFACE":p.current||"UNKNOWN_SURFACE")),"Chrome"===o.browserName){f({staticContext:o,getCurrentRoute:()=>p.current,getLastNavigationTime:()=>d.current||0});const e=w(p.current);e&&_({pwtStaticContext:o,surface:e})}}}),[]),l.current!==t){l.current=t,d.current=null!==(h=window.performance)&&void 0!==h&&h.now?window.performance.now():null;const{current:e}=d;if(!u.current){const t=!c.current;(0,S.A9)("routeStart",{tags:{action:r}}),(0,I.Eg)(t),(0,v.Ux)(t),(0,v.on)(),(0,C.tl)();const{customBufferSize:n,defaultBufferSize:a}=(0,I.LH)();e&&((0,S.A9)("routeStart.customBufferSize",{count:n}),(0,S.A9)("routeStart.defaultBufferSize",{count:a}),c.current={time:e,action:r})}}var h;return(0,L.jsx)(N.Provider,{value:g?o:null,children:(0,L.jsx)(M.Provider,{value:c.current,children:e})})}const j=()=>(0,a.useContext)(M),O=()=>(0,a.useContext)(N)},335972:(e,t,n)=>{n.d(t,{Z:()=>K});var a=n(667294),i=n(317672),r=n(790348);const o=e=>{const t=performance.getEntriesByType("resource").filter((e=>e.name.includes("i.pinimg"))).reduce(((e,t)=>{const n=t.name.replace(".jpg","").split("/");return{[n[n.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}}),{});[...Array.from(document.getElementsByTagName("img")).map((e=>{const n=e.src.replace(".jpg","").split("/"),a=n[n.length-1];if(t[a]){var r;const n=(null===(r=(0,i.rZ)(e))||void 0===r?void 0:r.width)||1,o=t[a].downloadSize;return{fileName:a,renderedSize:n,downloadedSize:o,ratio:o/n}}return{fileName:a,renderedSize:1,downloadedSize:1,ratio:1}})),...Array.from(document.querySelectorAll('div[role="img"]')).map((e=>{const n=e.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),a=n[n.length-1];if(t[a]&&e instanceof HTMLDivElement){var r;const n=(null===(r=(0,i.rZ)(e))||void 0===r?void 0:r.width)||1,o=t[a].downloadSize;return{fileName:a,renderedSize:n,downloadedSize:o,ratio:o/n}}return{fileName:a,renderedSize:1,downloadedSize:1,ratio:1}}))].forEach((t=>{const{ratio:n,fileName:a,downloadedSize:i}=t;t.ratio>1.05&&(0,r.A9)(`checkImageRatio.${e}`,{count:Math.round(10*n)/10,tags:{fileName:`${i}_${a}`}})}))};var s=n(860273),c=n(543059),d=n(607150);const l=({constraintMap:e,initialNavTiming:t,annotations:n})=>({...n,...(0,d.jh)("constraint_",e),...(0,d.jh)("mark_",(0,c.gQ)()),...(0,d.jh)("browser_",{...t?(0,d.D3)(t):{},...(0,d.rX)()})});var u=n(358864),m=n(505771),p=n(156381);const f=(e,t)=>{const{firstInputDelay:n}=(0,p.v2)();return[...e.map((e=>(0,m.Z)(e,t))).filter(Boolean),...n?[{name:"fid",id:(0,u.Z)(),parentId:t,startTime:n.startTime,endTime:n.endTime,annotationMap:{},binaryAnnotationMap:{}}]:[]]};var g=n(22773),v=n(453821),h=n(638089);const T=({annotateExperiments:e,annotations:t,binaryAnnotations:n,constraintMap:a,endTime:i,imageTimings:r,metricId:o,pwtStaticContext:c,startTime:d,traceId:u,spans:m})=>{const p=(0,g.Cg)();let T;"initial_app_load"===o.navigationType&&(T=(0,s.Z)());const y=r.map((({name:e})=>e)),_=p.map((e=>(0,v.p)(e,y))).filter((({timing:e})=>!(({startTime:e,responseEnd:t},n)=>e>n.endTime||!!t&&t<n.startTime||e<n.startTime-100)(e,{startTime:d,endTime:i})));return{type:"COMPLETE",traceId:u,startTime:d,endTime:i,spans:f(_,u).concat(m),annotationMap:l({constraintMap:a,initialNavTiming:T,annotations:t}),binaryAnnotationMap:(0,h.rA)({annotateExperiments:e,binaryAnnotations:n,entries:p,metricId:o,performanceResources:_,pwtEndTime:i,pwtStaticContext:c})}};let y=!1;const _=(e,t)=>e&&t?y?((0,r.H)("duplicated_initial_app_load_surface_pwt"),(0,u.Z)()):(y=!0,t):(0,u.Z)();var S=n(883119),E=n(226464),w=n(785893);function A({children:e,heading:t}){return(0,w.jsxs)("table",{style:{width:"100%"},cellPadding:4,children:[(0,w.jsx)("thead",{children:(0,w.jsx)("tr",{children:(0,w.jsx)("th",{colSpan:2,style:{background:"#efefef"},children:(0,w.jsx)(S.xv,{weight:"bold",align:"center",children:t})})})}),(0,w.jsx)("tbody",{children:e})]})}function C({name:e,children:t}){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{children:(0,w.jsx)(S.xv,{weight:"bold",children:e})}),(0,w.jsx)("td",{children:"string"==typeof t?(0,w.jsx)(S.xv,{children:t}):t})]})}function x({result:e}){return"ABORT"===e.type?(0,w.jsx)(C,{name:"Abort Reason",children:e.reason}):(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)(C,{name:"PWT (ms)",children:(0,w.jsx)(S.xv,{align:"end",children:Math.round(e.endTime-e.startTime)})}),(0,w.jsx)(C,{name:"PinTrace",children:(0,w.jsx)(S.xv,{italic:!0,children:(0,w.jsx)(S.rU,{href:`https://pintrace.pinadmin.com/zipkin/traces/${e.traceId.toString(16)}`,target:"blank",inline:!0,onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:"Open in a new tab"})})})]})}function I({data:e}){const{metricId:t,constraints:n,constraintMap:a,startTime:i,result:r}=e;return(0,w.jsxs)(S.xu,{children:[(0,w.jsxs)(A,{heading:(0,E.KJ)(t),children:[(0,w.jsx)(C,{name:"Thrift Id",children:String((0,E.Rp)(t))}),(0,w.jsx)(C,{name:"Surface",children:t.surface}),(0,w.jsx)(C,{name:"Navigation Type",children:t.navigationType}),(0,w.jsx)(C,{name:"Viewer Authed",children:String(t.isAuthenticated)})]}),(0,w.jsx)(A,{heading:"Constraints",children:n.map((e=>(0,w.jsx)(C,{name:e,children:(0,w.jsx)(S.xv,{align:"end",children:a[e]?Math.round(a[e]-i):"pending..."})},`constraint_${e}`)))}),(0,w.jsx)(A,{heading:"Result",children:r?(0,w.jsx)(x,{result:r}):(0,w.jsx)(C,{name:"result",children:(0,w.jsx)(S.$j,{accessibilityLabel:"profiling PWT",show:!0})})})]})}var b=n(223815);const L=e=>e.result?"COMPLETE"===e.result.type?"darkGray":"red":"gray";function N({data:e}){const[t,n]=(0,a.useState)(!1);return(0,w.jsx)(b.Z,{children:(0,w.jsxs)(S.mh,{children:[(0,w.jsx)(S.xu,{position:"fixed",margin:3,marginBottom:12,bottom:!0,left:!0,width:50,height:50,dangerouslySetInlineStyle:{__style:{zIndex:2e3}},children:(0,w.jsx)(S.hU,{accessibilityLabel:"PwtDebugger",bgColor:"lightGray",iconColor:L(e),icon:"flash",size:"lg",onClick:()=>n(!0)})}),t&&(0,w.jsx)(S.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:2e3}},children:(0,w.jsx)(S.u_,{accessibilityModalLabel:"Pinner Wait Time Debugger Details",heading:"Pinner Wait Time",onDismiss:()=>n(!1),footer:null,size:"sm",children:(0,w.jsx)(S.xu,{padding:6,children:(0,w.jsx)(I,{data:e})})})})]})})}var M=n(558775);const R=(e,t)=>{const n=(0,a.useRef)(e);(0,a.useEffect)((()=>{n.current=e}),[e]);const i=(0,a.useRef)(t);(0,a.useEffect)((()=>{i.current=t}),[t]),(0,a.useEffect)((()=>()=>i.current(n.current)),[])},j=(e,t)=>{const[n,i]=(0,a.useState)(t);return{state:n,dispatch:t=>i((n=>e(n,t)))}};var O=n(985271),P=n(7789),$=n(383434),B=n(567450),D=n(276602),Z=n(404646);const k=["initial_app_load","client_route_push"],z=(0,$.X)("PwtSurface"),H="NavigationComplete",F="VisuallyComplete",U=(e,t)=>{e.isSampled&&(0,M.Z)({metricId:e.metricConfig.metricId,pwtStaticContext:e.metricConfig.pwtStaticContext,result:{type:"ABORT",reason:t}})},G=e=>{if(e.metricConfig.constraints.every((t=>e.constraintMap[t]))){const t=Math.max(...e.metricConfig.constraints.map((t=>e.constraintMap[t])));return((e,t)=>{var n;const{metricConfig:{metricId:a,pwtStaticContext:i,annotateExperiments:s},annotations:d,binaryAnnotations:l,constraintMap:u,startTime:m,imageTimings:p,isSampled:f,spans:g}=e;(0,c.L8)(`PWT_Complete_${(0,E.KJ)(a)}`);const v=_("initial_app_load"===a.navigationType,null===(n=i.serverData)||void 0===n?void 0:n.trace_id),h=T({annotateExperiments:s,annotations:d,binaryAnnotations:l,constraintMap:u,endTime:t,imageTimings:p,metricId:a,pwtStaticContext:i,startTime:m,traceId:v,spans:g});f&&(0,M.Z)({metricId:a,pwtStaticContext:i,result:h});try{o(String(h.binaryAnnotationMap["metricId.surface"].value))}catch(y){(0,r.H)("image_ratio_check_error",{error:y})}return{...e,result:h,status:"DONE"}})(e,t)}return e},J=(e,t)=>{const{constraint:n,time:a}=t,i=(0,E.KJ)(e.metricConfig.metricId);return O.Z?e.metricConfig.constraints.find((e=>e===n))?e.constraintMap[n]?(z(`constraint "${n}" is already complete.`),(0,r.H)("duplicated_constraint_complete",{constraint:n,action:i}),e):(z(`marking constraint "${n}" as complete`),(0,c.ZP)(`constraint_${n}_is_complete`),G({...e,constraintMap:{...e.constraintMap,[n]:a||O.Z.now()}})):(z(`marked constraint "${n}" is not a required constraint.`),e):((0,r.H)("missing_window_performance",{action:i}),e)},q=(e,t)=>{if(z("dispatch action",t),"INIT_ROUTE"===t.type)return((e,t)=>{const{metricConfig:n,startTime:a,isSampled:i}=t;if("TIMING"===e.status&&a!==e.startTime&&U(e,"routeUpdatedOnSameSurface"),!n)return{status:"DISABLED",metricConfig:null};const o=(0,E.KJ)(n.metricId);return"TIMING"===e.status&&e.startTime===a&&e.constraintMap.NavigationComplete?((0,r.H)("duplicated_init_route_action",{action:o}),e):("Other"===n.pwtStaticContext.browserName&&!1===n.metricId.isAuthenticated&&"initial_app_load"===n.metricId.navigationType?((0,r.A9)(`TIMING.${o}`,{tags:{userAgent:null===(s=window)||void 0===s||null===(c=s.navigator)||void 0===c?void 0:c.userAgent}}),(0,r.A9)(`TIMING.sampled.${o}`,{tags:{userAgent:null===(d=window)||void 0===d||null===(l=d.navigator)||void 0===l?void 0:l.userAgent},sampleRate:.5})):((0,r.A9)(`TIMING.${o}`),(0,r.A9)(`TIMING.sampled.${o}`,{sampleRate:.5})),J({status:"TIMING",metricConfig:n,startTime:a,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:i,spans:[]},{constraint:H}));var s,c,d,l})(e,t.payload);if("TIMING"!==e.status)return z(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":U(e,t.reason);const n={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:n};case"ANNOTATE":const{name:a}=t.payload;if(!O.Z)return e;const i=O.Z.now();return z(`adding annotation {${a}: ${i}}`),{...e,annotations:{...e.annotations,[a]:i}};case"BINARY_ANNOTATE":const{name:o,value:s,annotationType:c}=t.payload;return z(`adding binary annotation {${o}: ${s}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[o]:{value:s,type:c}}};case"MARK_CONSTRAINT_COMPLETE":return J(e,t.payload);case"REMOVE_CONSTRAINT":return((e,t)=>{if(!O.Z){const t=(0,E.KJ)(e.metricConfig.metricId);(0,r.H)("missing_window_performance",{action:t})}z(`removing constraint "${t}"`);const n=e.metricConfig.constraints.filter((e=>e!==t)),{[t]:a,...i}=e.constraintMap;return G({...e,constraintMap:i,metricConfig:{...e.metricConfig,constraints:n}})})(e,t.payload);case"SET_SEGMENT":return((e,t)=>{if(!O.Z){const t=(0,E.KJ)(e.metricConfig.metricId);(0,r.H)("missing_window_performance",{action:t})}z(`updating pwt segment to "${t}"`);const n={...e.metricConfig.metricId,segment:t};return{...e,metricConfig:{...e.metricConfig,metricId:n}}})(e,t.payload);case"SET_VISUALLY_COMPLETE_RESULT":{const{payload:{imageTimings:n}}=t;if(0===n.length){U(e,"visuallyComplete_noImages");const t={type:"ABORT",reason:"visuallyComplete_noImages"};return{...e,status:"DONE",result:t}}const a=Math.max(...n.map((e=>e.responseEnd||0)));return J({...e,imageTimings:n},{constraint:F,time:a})}case"ADD_SUBSPAN":const{startTime:d}=e,{payload:{name:l,startTime:m,endTime:p,annotations:f,binaryAnnotations:g,parentId:v}}=t;return{...e,spans:[...e.spans,{name:l,id:(0,u.Z)(),startTime:m||d,endTime:p,annotationMap:{...f},binaryAnnotationMap:{...g},parentId:v}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,u.Z)(),startTime:O.Z?O.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":const h=e.spans.findIndex((e=>e.name===t.payload.name));return h>-1?(e.spans[h].endTime=O.Z?O.Z.now():0,t.payload.annotations&&(e.spans[h].annotationMap={...e.spans[h].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[h].binaryAnnotationMap={...e.spans[h].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,r.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:const T=(0,E.KJ)(e.metricConfig.metricId);return(0,r.H)("invalid_pwt_surface_action",{action:T}),e}};function K({children:e,...t}){var n;const i=(0,Z.fM)(),o=(e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}})(i),s=["seo_web_react18_render","web_react18_render_auth","web_react18_render_unauth",...null!==(n=t.annotateExperiments)&&void 0!==n?n:[]],c={...t,annotateExperiments:s,navigationInfo:{navigationType:o,clientNavigation:i}},{state:d,context:l}=(({surface:e,constraints:t,segment:n,measureGridVisuallyComplete:i,annotateExperiments:r,customEnabledNavigationTypes:o,navigationInfo:{clientNavigation:s,navigationType:c},sampleRate:d})=>{const l=(0,a.useRef)("NOT_SET"),u=(0,Z.N5)(),{state:m,dispatch:p}=j(q,{status:"DISABLED",metricConfig:null});if(l.current!==s&&(l.current=s,u)){const{isAuthenticated:a}=u,l=o||k,m=e&&c&&l.includes(c)?{metricId:{type:"surface",surface:e,navigationType:c,isAuthenticated:a,segment:n},annotateExperiments:r,constraints:[H,...t||[],...i?[F]:[]],pwtStaticContext:u}:null;p({type:"INIT_ROUTE",payload:{metricConfig:m,startTime:s?s.time:0,isSampled:!d||Math.random()<d}})}if((0,a.useEffect)((()=>{const e=e=>{p({type:"ABORT",reason:e})};B.Z.onSessionPause(e);const t=()=>{window.removeEventListener("resize",t),p({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",t),()=>{B.Z.removePauseListener(e),window.removeEventListener("resize",t)}}),[]),R(m,(e=>{z("handling unmount",e),"TIMING"===e.status&&U(e,"unmount")})),"TIMING"!==m.status||!m.constraintMap.NavigationComplete)return{state:m,context:null};const{startTime:f,metricConfig:g}=m;return{state:m,context:{id:f,metricId:g.metricId,abort:e=>p({type:"ABORT",reason:e}),addAnnotation:e=>p({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,n)=>p({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:n}}),setVisuallyCompleteResult:g.constraints.includes(F)?e=>p({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,markConstraintComplete:e=>p({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:O.Z?O.Z.now():0}}),removeConstraint:e=>p({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>p({type:"SET_SEGMENT",payload:e}),addSubspan:(e,t,n,a={},i={},r=null)=>p({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:n,annotations:a,binaryAnnotations:i,parentId:r}}),startSubspan:(e,t={},n={},a=null)=>p({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:a}}),stopSubspan:(e,t={},n={},a=null)=>p({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:a}})}}})(c);return(()=>{const e=(0,D.EV)(),t=!!e;(0,a.useEffect)((()=>{if(t){const t=null!=e&&e.metricId?(0,E.KJ)(e.metricId):null;(0,r.H)("nested_pwt_surface",{action:t})}}),[t])})(),(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)(D.Sb,{value:l,children:e}),P.DQ&&"DISABLED"!==d.status&&(0,w.jsx)(N,{data:{metricId:d.metricConfig.metricId,constraints:d.metricConfig.constraints,constraintMap:d.constraintMap,startTime:d.startTime,result:"DONE"===d.status?d.result:null}})]})}},607150:(e,t,n)=>{n.d(t,{D3:()=>r,Hd:()=>c,jh:()=>s,rX:()=>o});var a=n(672115),i=n(156381);const r=e=>({...(0,a.Z)(e),domComplete:e.domComplete||0,domContentLoadedEventEnd:e.domContentLoadedEventEnd||0,domContentLoadedEventStart:e.domContentLoadedEventStart||0,domInteractive:e.domInteractive||0,loadEventEnd:e.loadEventEnd||0,loadEventStart:e.loadEventStart||0}),o=()=>{const{firstInputDelay:e,largestContentfulPaint:t}=(0,i.v2)();return{firstInputDelayStart:(null==e?void 0:e.startTime)||0,firstInputDelayEnd:(null==e?void 0:e.endTime)||0,largestContentfulPaint:t||0}},s=(e,t)=>Object.keys(t).reduce(((n,a)=>({...n,[`${e}${a}`]:t[a]})),{}),c=(e,t)=>Object.keys(e).reduce(((n,a)=>t.includes(a)?{...n,[a]:e[a]}:n),Object.freeze({}))},672115:(e,t,n)=>{n.d(t,{Z:()=>a});const a=e=>({connectEnd:e.connectEnd||0,connectStart:e.connectStart||0,domainLookupEnd:e.domainLookupEnd||0,domainLookupStart:e.domainLookupStart||0,fetchStart:e.fetchStart||0,requestStart:e.requestStart||0,redirectEnd:e.redirectEnd||0,redirectStart:e.redirectStart||0,responseEnd:e.responseEnd||0,responseStart:e.responseStart||0,secureConnectionStart:e.secureConnectionStart||0,startTime:e.startTime||0,workerStart:e.workerStart||0,unloadEventStart:e.unloadEventStart||0,unloadEventEnd:e.unloadEventEnd||0})},505771:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(358864),i=n(672115),r=n(528961);const o=({category:e,isDeferred:t,isExternal:n})=>[e].concat(t?["deferred"]:[]).concat(n?["external"]:[]).join("_");function s(e,t){const{category:n,timing:s,isDeferred:c,isExternal:d,isVisuallyCompleteRequired:l}=e;return s.responseEnd&&("image"!==n||l)?{name:o(e),id:(0,a.Z)(),parentId:t,startTime:s.startTime,endTime:s.responseEnd,annotationMap:(0,i.Z)(s),binaryAnnotationMap:{category:(0,r.sk)(n),decodedBodySize:(0,r.cC)(s.decodedBodySize||0),initiatorType:(0,r.sk)(s.initiatorType),isDeferred:(0,r.qr)(c),isExternal:(0,r.qr)(d),name:(0,r.sk)(s.name),nextHopProtocol:(0,r.sk)(s.nextHopProtocol),transferSize:(0,r.cC)(s.transferSize||0)}}:null}},31062:(e,t,n)=>{n.d(t,{ku:()=>C,Jx:()=>E,PY:()=>A});var a=n(860273),i=n(156381);const r=()=>(0,i.PJ)().reduce(((e,{identifier:t,loadTime:n,renderTime:a})=>e[`${t}_loadTime`]?e[`${t}_dupe_loadTime`]?{...e,[`${t}_dupe_loadTime`]:n,[`${t}_dupe_renderTime`]:a}:e:{...e,[`${t}_loadTime`]:n,[`${t}_renderTime`]:a}),Object.freeze({}));var o=n(672115),s=n(607150),c=n(22773),d=n(464609);const l=e=>{switch(e){case"pin_closeup":{const e=(0,d.Z)();return(e=>{const t=(0,c.y0)();return e.reduce(((e,{name:n,match:a})=>t.filter((e=>a(e))).slice(0,2).reduce(((e,t,a)=>({...e,...(0,s.jh)(`${n}${a?"_dupe1":""}_`,(0,o.Z)(t))})),e)),Object.freeze({}))})([{name:"mainImage",match:({name:t})=>t===e},{name:"PinResource",match:({name:e})=>e.includes("PinResource")}])}default:return{}}};var u=n(169213),m=n(358864),p=n(558775),f=n(505771),g=n(383434),v=n(543059),h=n(453821),T=n(638089),y=n(790348);const _=(0,g.X)("LightStopwatch"),S={},E=({annotateExperiments:e,annotateMarks:t,annotateResourceTimingForSurface:n,name:i,pwtStaticContext:o})=>{const c=(()=>{let e=[],t=null;if(window.PerformanceObserver){const n=1e3;t=(0,u.Z)({entryTypes:["resource"]},(t=>{e=e.concat(t.getEntries()),e.length>n&&(e=e.slice(-n))}))}return{get:()=>e,disconnect:()=>{t&&t.disconnect()}}})();let d=!0,g={};(0,y.A9)(`TIMING.${i}`,{tags:{isAuth:o.isAuthenticated}});const E={type:"stopwatch",name:i,navigationType:"initial_app_load"},w={abort:e=>{d?(d=!1,(0,p.Z)({metricId:E,pwtStaticContext:o,result:{type:"ABORT",reason:e}})):(0,y.H)("duplicate_abort_action",{action:i})},error:(e,t)=>{const n={...t,action:i};d?(e&&(0,y.H)(e,n),c&&c.disconnect(),d=!1):(0,y.H)("duplicate_error_action",n)},stop:u=>{if(!d)return void(0,y.H)("duplicate_stop_action",{action:i});d=!1,c.disconnect();const _=(0,m.Z)(),S=(0,a.Z)(),w=c.get(),A={type:"COMPLETE",traceId:(0,m.Z)(),startTime:0,endTime:u,spans:[{name:"network_resources",id:_,startTime:0,endTime:u,annotationMap:{},binaryAnnotationMap:{},parentId:null},...w.map((e=>(0,f.Z)((0,h.p)(e,[]),_))).filter(Boolean)],annotationMap:{...(0,s.jh)("resource_",n?l(n):{}),...(0,s.jh)("element_",r()),...(0,s.jh)("mark_",t&&t.length?(0,s.Hd)((0,v.gQ)(),t):{}),...(0,s.jh)("browser_",S?(0,s.D3)(S):{})},binaryAnnotationMap:(0,T.ng)({annotateExperiments:e,metricId:E,pwtStaticContext:o,performanceResourceTimings:w,binaryAnnotations:g})};(0,p.Z)({metricId:E,pwtStaticContext:o,result:A,isAuth:o.isAuthenticated})},addBinaryAnnotation:(e,t,n)=>{_(`adding binary annotation {${e}: ${String(t)}}`),g={...g,[e]:{value:t,type:n}}}};return S[i]=w,w},w=e=>S[e],A=e=>!!w(e),C=({stopwatchName:e,binaryAnnotationName:t,value:n,annotationType:a})=>{const i=w(e);i&&i.addBinaryAnnotation(t,n,a)}},464609:(e,t,n)=>{n.d(t,{Z:()=>i,f:()=>a});const a="closeupImage",i=()=>{if(!document.querySelector)return null;const e=document.querySelector('head>link[rel="preload"][as="image"][href^="https://i.pinimg.com/"]');return e instanceof HTMLLinkElement?e.href:null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/35972-f2b7f6a04d11f48e.mjs.map